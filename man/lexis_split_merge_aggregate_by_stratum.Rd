% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/wip_lexis_split_merge_aggregate.R
\name{lexis_split_merge_aggregate_by_stratum}
\alias{lexis_split_merge_aggregate_by_stratum}
\title{Split, Merge, and Aggregate a \code{Lexis} Object}
\usage{
lexis_split_merge_aggregate_by_stratum(
  dt,
  breaks,
  aggre_exprs,
  aggre_by = NULL,
  aggre_ts_col_nms = NULL,
  merge_dt = NULL,
  merge_dt_by = NULL,
  merge_dt_harmonisers = NULL,
  subset = NULL,
  weight_col_nm = NULL,
  split_lexis_column_exprs = NULL,
  optional_steps = NULL
)
}
\arguments{
\item{dt}{\verb{[Lexis]} (no default)
A \code{Lexis} dataset (\verb{[Epi::Lexis]} / \verb{[Lexis_dt]}).}

\item{aggre_exprs}{\verb{[character, list]} (no default)

Defines what is aggregated within every stratum-interval
defined by \code{aggre_ts_col_nms} and the time scales \code{aggre_ts_col_nms}.
See \strong{Details} for how and where the expressions are evaluated.

Each element must be either named and an R expression (see e.g. \verb{[quote]})
or a character string which identifies the aggregation to perform from
a table of pre-defined expressions within \code{popEpi} (shown in \strong{Details}).
E.g. \code{c("n_events", "t_at_risk")},
\code{list("n_events", t_at_risk = quote(sum(lex.dur)))}.}

\item{aggre_ts_col_nms}{\verb{[NULL, character]} (default \code{NULL})

Names of \code{Lexis} time scales in \code{dt} by which to aggregate results.
\itemize{
\item \code{NULL}: Use \code{names(breaks)}.
\item \code{character}: Aggregate by these time scales. E.g. \code{"ts_fut"}.
}}

\item{merge_dt}{Passed to \verb{[lexis_merge]}.}

\item{merge_dt_by}{Passed to \verb{[lexis_merge]}.}

\item{merge_dt_harmonisers}{Passed to \verb{[lexis_merge]}.}

\item{weight_col_nm}{\verb{[NULL, character]} (default \code{NULL})

Name of weight column in \code{dt} if you want to perform individual weighting.
See \strong{Details} for where this comes into play.
\itemize{
\item \code{NULL}: No individual weighting is performed.
\item \code{character}: This is the name of the column. E.g. \code{"my_iw"}.
}}

\item{split_lexis_column_exprs}{\verb{[NULL, list]}

Additional columns to create in \code{Lexis} data after splitting and before
aggregation. Any column you create this way can be the used in an
aggregation expression.
\itemize{
\item \code{NULL}: Don't create additional columns.
\item \code{list}: Each element is named and an R expression object, e.g.
\code{list(my_col = quote(my_function(lex.Cst, lex.Xst)))}.
See \strong{Details} for more information on when and how these expressions
are evaluated.
}}

\item{optional_steps}{\verb{[NULL, list]} (default \code{NULL})

Optional steps to perform along the way.
\itemize{
\item \code{NULL}: No optional steps are performed.
\item \code{list}: Each named element is a function that is called in a specific
stage of the run. See \strong{Details} for what functions are recognised.
}}
}
\description{
Function(s) which split, merge, and aggregate a \code{Lexis} object in one go.
}
\seealso{
Other Lexis_functions: 
\code{\link{lexis_funs}},
\code{\link{lexis_merge}()}
}
\concept{Lexis_functions}
